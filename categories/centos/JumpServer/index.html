<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



<title>
  
    Category: JumpServer
  
</title>

<meta name="description" content="Testing website">
<meta property="og:type" content="website">
<meta property="og:title" content="bibi">
<meta property="og:url" content="http://yxbibi.com/categories/centos/JumpServer/index.html">
<meta property="og:site_name" content="bibi">
<meta property="og:description" content="Testing website">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="bibi">
<meta name="twitter:description" content="Testing website">


  <link rel="alternative" href="/atom.xml" title="bibi" type="application/atom+xml">



  <link rel="icon" href="/favicon.png">


<link rel="stylesheet" href="/perfect-scrollbar/css/perfect-scrollbar.min.css">
<link rel="stylesheet" href="/styles/main.css">






</head>
<body class="monochrome">
  <div class="mobile-header">
  <button class="sidebar-toggle" type="button">
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
  </button>
  <a class="title" href="/">bibi</a>
</div>

  <div class="main-container">
    <div class="sidebar">
  <div class="header">
    <h1 class="title"><a href="/">bibi</a></h1>
    
    <div class="info">
      <div class="content">
        
          <div class="description">Testing website</div>
        
        
          <div class="author">Mode</div>
        
      </div>
      
        <div class="avatar">
          
            <a href="/about"><img src="https://cn.gravatar.com/avatar/35fef74d731255cd569c2c2b0b9e87e4?s=200"></a>
          
        </div>
      
    </div>
  </div>
  <div class="body">
    
      
        <ul class="nav">
          
            
              <li class="category-list-container">
                <a href="javascript:;">Category</a>
                <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/">MySQL</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Openresty/">Openresty</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/">PHP</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Zabbix/">Zabbix</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/centos/">centos</a><span class="category-list-count">20</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/centos7/">centos7</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/rsync/">rsync</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/text/">text</a><span class="category-list-count">1</span></li></ul>
              </li>
            
          
            
              <li class="tag-list-container">
                <a href="javascript:;">Tag</a>
                <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/DNS服务器搭建/">DNS服务器搭建</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ELK/">ELK</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/EMQ/">EMQ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Filebeat/">Filebeat</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JumpServer/">JumpServer</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/KONG/">KONG</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LVM/">LVM</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Memcached/">Memcached</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/">MySQL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nginx/">Nginx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Openresty/">Openresty</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHP/">PHP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PXE-Kickstart-Cobbler/">PXE+Kickstart+Cobbler</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/">Redis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis3/">Redis3</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Rsync-inotify/">Rsync+inotify</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tomcat/">Tomcat</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Zabbix/">Zabbix</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/app-install/">app install</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bibi/">bibi</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/centos7/">centos7</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ftp虚拟用户创建过程/">ftp虚拟用户创建过程</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hello/">hello</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a><span class="tag-list-count">22</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lvm/">lvm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/openssl/">openssl</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rsync/">rsync</a><span class="tag-list-count">1</span></li></ul>
              </li>
            
          
            
              <li class="archive-list-container">
                <a href="javascript:;">Archive</a>
                <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/">2019</a><span class="archive-list-count">30</span></li></ul>
              </li>
            
          
        </ul>
      
        <ul class="nav">
          
            
              <li>
                <a href="/" title="Homepage">Homepage</a>
              </li>
            
          
            
              <li>
                <a href="/archives" title="By Year">By Year</a>
              </li>
            
          
        </ul>
      
        <ul class="nav">
          
            
              <li>
                <a href="https://github.com/denjones/hexo-theme-chan" title="Chan" target="_blank" rel="noopener">Chan</a>
              </li>
            
          
            
              <li>
                <a href="https://github.com/denjones" title="Github" target="_blank" rel="noopener">Github</a>
              </li>
            
          
            
              <li>
                <a href="/atom.xml" title="RSS">RSS</a>
              </li>
            
          
        </ul>
      
    
  </div>
</div>

    <div class="main-content">
      
        <div style="max-width: 1000px">
      
          <h1>JumpServer</h1>


  
  
    <div class="post-list">
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2019/08/13/JumpServer部署/">
  JumpServer部署
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2019/08/13/JumpServer部署/"><span class="article-date">
  2019-08-13
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/centos/">centos</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/centos/JumpServer/">JumpServer</a></li></ul></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JumpServer/">JumpServer</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <h1 id="JumpServer部署"><a href="#JumpServer部署" class="headerlink" title="JumpServer部署"></a>JumpServer部署</h1><p>请参考官方安装文档</p>
<p>不同的是安装目录安装在/data/soft/jumpserver</p>
<p><a href="https://jumpserver.readthedocs.io/zh/docs/step_by_step.html" target="_blank" rel="noopener">https://jumpserver.readthedocs.io/zh/docs/step_by_step.html</a> (推荐 有autoenv安装)<br><a href="http://docs.jumpserver.org/zh/docs/setup_by_centos7.html" target="_blank" rel="noopener">http://docs.jumpserver.org/zh/docs/setup_by_centos7.html</a></p>
<p>一、修改字符集</p>
<p>修改字符集，否则可能报 input/output error的问题，因为日志里打印了中文</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@op-remote ~]# localedef -c -f UTF-8 -i zh_CN</span><br><span class="line">zh_CN.UTF-8</span><br><span class="line">[root@op-remote ~]# export LC_ALL=zh_CN.UTF-8</span><br><span class="line">[root@op-remote ~]# echo &apos;LANG=&quot;zh_CN.UTF-8&quot;&apos; &gt;</span><br><span class="line">/etc/locale.conf</span><br><span class="line"></span><br><span class="line"># 更改回到英文字符集</span><br><span class="line"></span><br><span class="line">[root@op-remote requirements]# localedef -c -f UTF-8 -i</span><br><span class="line">en_US en_US.UTF-8</span><br><span class="line">[root@op-remote requirements]# export LC_ALL=en_US.UTF-8</span><br><span class="line">[root@op-remote requirements]# echo &apos;LANG=&quot;en_US.UTF-</span><br><span class="line">8&quot;&apos; &gt; /etc/locale.conf</span><br></pre></td></tr></table></figure>

<h3 id="二、准备Python3环境"><a href="#二、准备Python3环境" class="headerlink" title="二、准备Python3环境"></a>二、准备Python3环境</h3><p>（这里我们注意可以安装python3.6来防止后面的报错，我也不知道为什么<br>python3.7有什么问题，cao）</p>
<h4 id="1-安装编译环境"><a href="#1-安装编译环境" class="headerlink" title="1.安装编译环境"></a>1.安装编译环境</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@op-remote ~]# yum -y install wget sqlite-devel xz</span><br><span class="line">gcc automake zlib-devel openssl-devel epel-release git</span><br><span class="line">libffi-devel</span><br></pre></td></tr></table></figure>

<h4 id="2-解压安装"><a href="#2-解压安装" class="headerlink" title="2.解压安装"></a>2.解压安装</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@lp nginx]# wget</span><br><span class="line">https://www.python.org/ftp/python/3.6.6/Python-3.6.6.tgz</span><br><span class="line">[root@lp nginx]# tar xvf Python-3.6.6.tgz</span><br><span class="line">[root@lp nginx]# cd Python-3.6.6/</span><br><span class="line">[root@lp Python-3.6.6]# ./configure --</span><br><span class="line">prefix=/usr/local/python3.6 ; make &amp;&amp; make install</span><br></pre></td></tr></table></figure>

<h4 id="3-安装OpenSSL-1-1-0-（如果编译报错）"><a href="#3-安装OpenSSL-1-1-0-（如果编译报错）" class="headerlink" title="3.安装OpenSSL 1.1.0 （如果编译报错）"></a>3.安装OpenSSL 1.1.0 （如果编译报错）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">报错：./python: /lib64/libssl.so.1.1: version</span><br><span class="line">`OPENSSL_1_1_0&apos;</span><br><span class="line">[root@lp ~]# wget https://www.openssl.org/source/openssl-1.1.0h.tar.gz</span><br><span class="line">[root@lp ~]# tar xvf openssl-1.1.0h.tar.gz</span><br><span class="line">[root@lp openssl-1.1.0h]# cd openssl-1.1.0h/ &amp;&amp; ./config</span><br><span class="line">--prefix=/usr/local/openssl &amp;&amp; make &amp;&amp; make install &amp;&amp;</span><br><span class="line">make depend</span><br><span class="line">[root@lp local]# mv /usr/lib64/libssl.so.1.1</span><br><span class="line">[root@lp local]# mv /usr/lib64/libcrypto.so.1.1</span><br><span class="line">[root@lp local]# ln -s</span><br><span class="line">/usr/local/openssl/lib/libssl.so.1.1</span><br><span class="line">/usr/lib64/libssl.so.1.1</span><br><span class="line">[root@lp local]# ln -s</span><br><span class="line">/usr/local/openssl/lib/libcrypto.so.1.1</span><br><span class="line">/lib64/libcrypto.so.1.1</span><br></pre></td></tr></table></figure>

<h4 id="4-更改Module文件"><a href="#4-更改Module文件" class="headerlink" title="4.更改Module文件"></a>4.更改Module文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@lp Python-3.6.6]# vim Modules/Setup</span><br><span class="line"># Socket module helper for socket(2)</span><br><span class="line">_socket socketmodule.c</span><br><span class="line"># Socket module helper for SSL support; you must comment</span><br><span class="line">out the other</span><br><span class="line"># socket line above, and possibly edit the SSL variable:</span><br><span class="line"></span><br><span class="line">SSL=/usr/local/openssl</span><br><span class="line">_ssl _ssl.c \</span><br><span class="line">-DUSE_SSL -I$(SSL)/include -</span><br><span class="line">I$(SSL)/include/openssl \</span><br><span class="line">-L$(SSL)/lib -lssl -lcrypto</span><br></pre></td></tr></table></figure>

<h5 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">防止出现这个错误：ModuleNotFoundError: No module named</span><br><span class="line">&apos;_ctypes&apos;，需要安装下面的软件</span><br><span class="line">[root@lp Python-3.6.6]# yum install libffi-devel -y</span><br></pre></td></tr></table></figure>

<h4 id="5-正式安装"><a href="#5-正式安装" class="headerlink" title="5.正式安装"></a>5.正式安装</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@lp Python-3.6.6]# ./configure --</span><br><span class="line">prefix=/usr/local/python3.6 ; make &amp;&amp; make install</span><br><span class="line">[root@lp Python-3.6.6]# vim /etc/profile</span><br><span class="line">export PATH=$PATH:/usr/local/python3.6/bin</span><br><span class="line">[root@lp Python-3.6.6]# source /etc/profile</span><br></pre></td></tr></table></figure>

<h3 id="三、下载JumpServer"><a href="#三、下载JumpServer" class="headerlink" title="三、下载JumpServer"></a>三、下载JumpServer</h3><h4 id="1-下载或-Clone-项目"><a href="#1-下载或-Clone-项目" class="headerlink" title="1.下载或 Clone 项目"></a>1.下载或 Clone 项目</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[JumpServer@op-remote ~]$ git clone</span><br><span class="line">https://github.com/jumpserver/jumpserver.git &amp;&amp; cd</span><br><span class="line">jumpserver &amp;&amp; git checkout master</span><br></pre></td></tr></table></figure>

<h4 id="2-安装依赖-RPM-包"><a href="#2-安装依赖-RPM-包" class="headerlink" title="2.安装依赖 RPM 包"></a>2.安装依赖 RPM 包</h4><h5 id="需要通过root去安装"><a href="#需要通过root去安装" class="headerlink" title="需要通过root去安装"></a>需要通过root去安装</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@op-remote ~]$ cd JumpServerPackage/requirements/</span><br><span class="line">[root@op-remote requirements]$ sudo yum -y install $(cat</span><br><span class="line">rpm_requirements.txt)</span><br></pre></td></tr></table></figure>

<h4 id="3-安装-Python-库依赖"><a href="#3-安装-Python-库依赖" class="headerlink" title="3.安装 Python 库依赖"></a>3.安装 Python 库依赖</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[JumpServer@op-remote requirements]$ pip3 install -r</span><br><span class="line">requirements.txt</span><br></pre></td></tr></table></figure>

<h5 id="注意：-1"><a href="#注意：-1" class="headerlink" title="注意："></a>注意：</h5><p>这里会遇到一些错误的提示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gevent 1.3.6 has requirement greenlet&gt;=0.4.14;</span><br><span class="line">platform_python_implementation == &quot;CPython&quot;, but you&apos;ll</span><br><span class="line">have greenlet 0.4.12 which is incompatible.</span><br></pre></td></tr></table></figure>

<p>greenlet版本不够</p>
<p>但是当你卸载了greenlet以后，系统提示的是卸载了Successfully uninstalled<br>greenlet-0.4.14，可以看到，系统是安装了最新的版本，但是这里却无法识<br>别，这就很奇怪了，然后我尝试安装一个低版本：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">[root@op-remote requirements]# pip3 install</span><br><span class="line">greenlet==0.4.12</span><br><span class="line">Looking in indexes:</span><br><span class="line">http://mirrors.aliyun.com/pypi/simple/</span><br><span class="line">Collecting greenlet==0.4.12</span><br><span class="line">Downloading</span><br><span class="line">http://mirrors.aliyun.com/pypi/packages/be/76/82af375d98</span><br><span class="line">724054b7e273b5d9369346937324f9bcc20980b45b068ef0b0/green</span><br><span class="line">let-0.4.12.tar.gz (57kB)</span><br><span class="line">100% |████████████████████████████████| 61kB</span><br><span class="line">58.7MB/s</span><br><span class="line">gevent 1.3.6 has requirement greenlet&gt;=0.4.14;</span><br><span class="line">platform_python_implementation == &quot;CPython&quot;, but you&apos;ll</span><br><span class="line">have greenlet 0.4.12 which is incompatible.</span><br><span class="line">Installing collected packages: greenlet</span><br><span class="line">Running setup.py install for greenlet ... error</span><br><span class="line">Complete output from command</span><br><span class="line">/usr/local/python3.7/bin/python3.7 -u -c &quot;import</span><br><span class="line">setuptools, tokenize;__file__=&apos;/tmp/pip-install-</span><br><span class="line">3pm__ow5/greenlet/setup.py&apos;;f=getattr(tokenize, &apos;open&apos;,</span><br><span class="line">open)(__file__);code=f.read().replace(&apos;\r\n&apos;,</span><br><span class="line">&apos;\n&apos;);f.close();exec(compile(code, __file__, &apos;exec&apos;))&quot;</span><br><span class="line">install --record /tmp/pip-record-whkcmkrj/installrecord.</span><br><span class="line">txt --single-version-externally-managed --</span><br><span class="line">compile:</span><br><span class="line">running install</span><br><span class="line">running build</span><br><span class="line">running build_ext</span><br><span class="line">building &apos;greenlet&apos; extension</span><br><span class="line">creating build</span><br><span class="line">creating build/temp.linux-x86_64-3.7</span><br><span class="line">gcc -pthread -Wno-unused-result -Wsign-compare -</span><br><span class="line">DNDEBUG -g -fwrapv -O3 -Wall -fPIC -</span><br><span class="line">I/usr/local/python3.7/include/python3.7m -c greenlet.c -</span><br><span class="line">o build/temp.linux-x86_64-3.7/greenlet.o</span><br><span class="line">greenlet.c: In function ‘g_switchstack’:</span><br><span class="line">greenlet.c:463:29: error: ‘PyThreadState’ has no</span><br><span class="line">member named ‘exc_type’</span><br><span class="line">current-&gt;exc_type = tstate-&gt;exc_type;</span><br><span class="line">^</span><br><span class="line">greenlet.c:464:30: error: ‘PyThreadState’ has no</span><br><span class="line">member named ‘exc_value’</span><br><span class="line">current-&gt;exc_value = tstate-&gt;exc_value;</span><br><span class="line">^</span><br><span class="line">greenlet.c:465:34: error: ‘PyThreadState’ has no</span><br><span class="line">member named ‘exc_traceback’</span><br><span class="line">current-&gt;exc_traceback = tstate-&gt;exc_traceback;</span><br><span class="line"></span><br><span class="line">greenlet.c:485:9: error: ‘PyThreadState’ has no</span><br><span class="line">member named ‘exc_type’</span><br><span class="line">tstate-&gt;exc_type = target-&gt;exc_type;</span><br><span class="line">^</span><br><span class="line">greenlet.c:487:9: error: ‘PyThreadState’ has no</span><br><span class="line">member named ‘exc_value’</span><br><span class="line">tstate-&gt;exc_value = target-&gt;exc_value;</span><br><span class="line">^</span><br><span class="line">greenlet.c:489:9: error: ‘PyThreadState’ has no</span><br><span class="line">member named ‘exc_traceback’</span><br><span class="line">tstate-&gt;exc_traceback = target-&gt;exc_traceback;</span><br><span class="line">^</span><br><span class="line"></span><br><span class="line">## error: command &apos;gcc&apos; failed with exit status 1</span><br><span class="line"></span><br><span class="line">Command &quot;/usr/local/python3.7/bin/python3.7 -u -c</span><br><span class="line">&quot;import setuptools, tokenize;__file__=&apos;/tmp/pip-install-</span><br><span class="line">3pm__ow5/greenlet/setup.py&apos;;f=getattr(tokenize, &apos;open&apos;,</span><br><span class="line">open)(__file__);code=f.read().replace(&apos;\r\n&apos;,</span><br><span class="line">&apos;\n&apos;);f.close();exec(compile(code, __file__, &apos;exec&apos;))&quot;</span><br><span class="line">install --record /tmp/pip-record-whkcmkrj/installrecord.</span><br><span class="line">txt --single-version-externally-managed --</span><br><span class="line">compile&quot; failed with error code 1 in /tmp/pip-install-</span><br><span class="line">3pm__ow5/greenlet/</span><br></pre></td></tr></table></figure>

<p>报了一个和安装库依赖的时候一样的错误，那么我可以大胆的预测，可能是安<br>装依赖的时候，选择安装了requirements.txt当中的低版本。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@op-remote requirements]# vim requirements.txt</span><br><span class="line">ephem==3.7.6.0</span><br><span class="line">eventlet==0.22.1</span><br><span class="line">ForgeryPy==0.1</span><br><span class="line">greenlet==0.4.14，然后这个问题就顺利解决啦</span><br><span class="line">gunicorn==19.7.1</span><br><span class="line"></span><br><span class="line"># 很明显的看到，他这里清单默认安装的是greenlet==0.4.12版本，和单</span><br><span class="line"></span><br><span class="line">独安装这个版本是报的一个错误，那么这样就清晰明了了，这是一个很大的错</span><br><span class="line">误，需要我们通</span><br></pre></td></tr></table></figure>

<h4 id="4-安装-Redis"><a href="#4-安装-Redis" class="headerlink" title="4.安装 Redis"></a>4.安装 Redis</h4><p>Jumpserver 使用 Redis 做 cache 和 celery broke</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[JumpServer@op-remote ~]$ tar xvf redis-4.0.10.tar.gz</span><br><span class="line">[JumpServer@op-remote ~]$ cd redis-4.0.10/</span><br><span class="line">[JumpServer@op-remote ~]$ mkdir redis</span><br><span class="line">[JumpServer@op-remote redis-4.0.10]$ make</span><br><span class="line">PREFIX=/home/JumpServer/redis install</span><br></pre></td></tr></table></figure>

<h4 id="5-安装MySQL-5-7"><a href="#5-安装MySQL-5-7" class="headerlink" title="5.安装MySQL-5.7"></a>5.安装MySQL-5.7</h4><h5 id="①下载"><a href="#①下载" class="headerlink" title="①下载"></a>①下载</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[JumpServer@op-remote ~]$ wget</span><br><span class="line">http://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-</span><br><span class="line">5.7.23.tar.gz</span><br><span class="line">[JumpServer@op-remote ~]$ wget</span><br><span class="line">http://downloads.sourceforge.net/project/boost/boost/1.5</span><br><span class="line">9.0/boost_1_59_0.tar.gz</span><br><span class="line">[JumpServer@op-remote ~]$ tar xvf mysql-5.7.23.tar.gz</span><br><span class="line">[JumpServer@op-remote ~]$ tar xvf boost_1_59_0.tar.gz</span><br></pre></td></tr></table></figure>

<h5 id="②安装必要编译插件"><a href="#②安装必要编译插件" class="headerlink" title="②安装必要编译插件"></a>②安装必要编译插件</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@op-remote home]# yum -y install autoconf automake</span><br><span class="line">libtool cmake ncurses-devel openssl-devel lzo-devel</span><br><span class="line">zlib-devel gcc gcc-c++</span><br></pre></td></tr></table></figure>

<h5 id="③编译开始"><a href="#③编译开始" class="headerlink" title="③编译开始"></a>③编译开始</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">[JumpServer@op-remote mysql-5.7.23]$ cmake . -</span><br><span class="line">DCMAKE_INSTALL_PREFIX=/home/JumpServer/mysql/mysql-</span><br><span class="line">5.7.23 \</span><br><span class="line">-DMYSQL_DATADIR=/home/JumpServer/mysql/mysql-5.7.23 \</span><br><span class="line">-DDOWNLOAD_BOOST=1 \</span><br><span class="line">-DWITH_BOOST=/home/JumpServer/boost_1_59_0 \ #指定boost的</span><br><span class="line">位置</span><br><span class="line">-DSYSCONFDIR=/home/JumpServer/mysql/mysql-5.7.23/etc/ \</span><br><span class="line">-DWITH_INNOBASE_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_PARTITION_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_FEDERATED_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_BLACKHOLE_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_MYISAM_STORAGE_ENGINE=1 \</span><br><span class="line">-DENABLED_LOCAL_INFILE=1 \</span><br><span class="line">-DENABLE_DTRACE=0 \</span><br><span class="line"></span><br><span class="line">-DDEFAULT_CHARSET=utf8 \</span><br><span class="line">-DDEFAULT_COLLATION=utf8_general_ci \</span><br><span class="line">-DEXTRA_CHARSETS=all \</span><br><span class="line">-DWITH_EMBEDDED_SERVER=1 \</span><br><span class="line">-DMYSQL_TCP_PORT=3306;</span><br><span class="line"></span><br><span class="line"># 单行版</span><br><span class="line"></span><br><span class="line">[JumpServer@op-remote mysql-5.7.23]$ cmake . -</span><br><span class="line">DCMAKE_INSTALL_PREFIX=/home/JumpServer/mysql/mysql-</span><br><span class="line">5.7.23 -DMYSQL_DATADIR=/home/JumpServer/mysql/mysql-</span><br><span class="line">5.7.23 -DDOWNLOAD_BOOST=1 -</span><br><span class="line">DWITH_BOOST=/home/JumpServer/boost_1_59_0 -</span><br><span class="line">DSYSCONFDIR=/home/JumpServer/mysql/mysql-5.7.23/etc/ -</span><br><span class="line">DWITH_INNOBASE_STORAGE_ENGINE=1 -</span><br><span class="line">DWITH_PARTITION_STORAGE_ENGINE=1 -</span><br><span class="line">DWITH_FEDERATED_STORAGE_ENGINE=1 -</span><br><span class="line">DWITH_BLACKHOLE_STORAGE_ENGINE=1 -</span><br><span class="line">DWITH_MYISAM_STORAGE_ENGINE=1 -DENABLED_LOCAL_INFILE=1 -</span><br><span class="line">DENABLE_DTRACE=0 -DDEFAULT_CHARSET=utf8 -</span><br><span class="line">DDEFAULT_COLLATION=utf8_general_ci -DEXTRA_CHARSETS=all</span><br><span class="line">-DWITH_EMBEDDED_SERVER=1 -DMYSQL_TCP_PORT=3306;</span><br><span class="line"></span><br><span class="line"># 开始编译</span><br><span class="line"></span><br><span class="line">[JumpServer@op-remote mysql-5.7.23]$ make -j2 &amp;&amp; make</span><br><span class="line">install</span><br></pre></td></tr></table></figure>

<h5 id="④环境变量配置"><a href="#④环境变量配置" class="headerlink" title="④环境变量配置"></a>④环境变量配置</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[JumpServer@op-remote ~]$ vim .bash_profile</span><br><span class="line">export PATH=$PATH:/home/JumpServer/mysql/mysql-</span><br><span class="line">5.7.23/bin</span><br><span class="line">[JumpServer@op-remote ~]$ source .bash_profile</span><br></pre></td></tr></table></figure>

<h5 id="⑤数据库配置文件"><a href="#⑤数据库配置文件" class="headerlink" title="⑤数据库配置文件"></a>⑤数据库配置文件</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line">[JumpServer@op-remote ~]$ /home/JumpServer/mysql/mysql-</span><br><span class="line">5.7.23/etc/my.cnf</span><br><span class="line">[client]</span><br><span class="line">port = 3306</span><br><span class="line">socket = /home/JumpServer/mysql/logs/mysql.sock</span><br><span class="line">[mysqld]</span><br><span class="line"></span><br><span class="line"># Skip</span><br><span class="line"></span><br><span class="line">skip-grant-tables = 1 # 跳过授权列表</span><br><span class="line"></span><br><span class="line">skip_name_resolve = 1</span><br><span class="line">skip-external-locking = 1</span><br><span class="line">symbolic-links= 0</span><br><span class="line"></span><br><span class="line"># GENERAL</span><br><span class="line"></span><br><span class="line">user = JumpServer</span><br><span class="line">default_storage_engine = InnoDB</span><br><span class="line">character-set-server = utf8</span><br><span class="line">socket = /home/JumpServer/mysql/logs/mysql.sock</span><br><span class="line">pid_file =/home/JumpServer/mysql/logs/mysqld.pid</span><br><span class="line">basedir = /home/JumpServer/mysql/mysql-5.7.23</span><br><span class="line">port = 3306</span><br><span class="line">bind-address = 0.0.0.0</span><br><span class="line">log-warnings = 2</span><br><span class="line">explicit_defaults_for_timestamp = off</span><br><span class="line">#sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</span><br><span class="line">#read_only=on</span><br><span class="line">sql_mode=NO_ENGINE_SUBSTITUTION</span><br><span class="line"></span><br><span class="line"># MyISAM</span><br><span class="line"></span><br><span class="line">key_buffer_size = 32M #size of the</span><br><span class="line">buffer used for index blocks#</span><br><span class="line">#myisam_re-cover = FORCE,BACKUP</span><br><span class="line"></span><br><span class="line"># SAFETY</span><br><span class="line"></span><br><span class="line">max_allowed_packet = 16M</span><br><span class="line">max_connect_errors = 1000000</span><br><span class="line">sysdate_is_now = 1</span><br><span class="line">#innodb = FORCE</span><br><span class="line">#innodb_strict_mode = 1</span><br><span class="line"></span><br><span class="line"># Replice</span><br><span class="line"></span><br><span class="line">server-id = 313306</span><br><span class="line">relay_log = mysqld-relay-bin</span><br><span class="line">gtid_mode = on</span><br><span class="line">enforce-gtid-consistency</span><br><span class="line">log-slave-updates = on</span><br><span class="line">master_info_repository =TABLE</span><br><span class="line">relay_log_info_repository =TABLE</span><br><span class="line"></span><br><span class="line"># rpl_semi_sync_master_enabled=1</span><br><span class="line"></span><br><span class="line"># rpl_semi_sync_master_timeout=200 # 0.2 second</span><br><span class="line"></span><br><span class="line"># DATA STORAGE</span><br><span class="line"></span><br><span class="line">datadir = /home/JumpServer/mysql/mysql-5.7.23/data</span><br><span class="line">tmpdir = /home/JumpServer/mysql/mysql-5.7.23/temp/</span><br><span class="line"></span><br><span class="line"># BINARY LOGGING</span><br><span class="line"></span><br><span class="line">log_bin = /home/JumpServer/mysql/logs/mysql-bin</span><br><span class="line">max_binlog_size = 1000M</span><br><span class="line"></span><br><span class="line">binlog_format = row</span><br><span class="line">expire_logs_days = 7</span><br><span class="line"></span><br><span class="line"># sync_binlog = 1</span><br><span class="line"></span><br><span class="line"># CACHES AND LIMITS</span><br><span class="line"></span><br><span class="line">tmp_table_size = 32M</span><br><span class="line">max_heap_table_size = 32M</span><br><span class="line">query_cache_type = 0</span><br><span class="line">query_cache_size = 0</span><br><span class="line">max_connections = 4000</span><br><span class="line">thread_cache_size = 2048</span><br><span class="line">open_files_limit = 65535</span><br><span class="line">table_definition_cache = 4096</span><br><span class="line">table_open_cache = 4096</span><br><span class="line">sort_buffer_size = 20M</span><br><span class="line">read_buffer_size = 2M</span><br><span class="line">read_rnd_buffer_size = 2M</span><br><span class="line">#thread_concurrency = 24</span><br><span class="line">join_buffer_size = 1M</span><br><span class="line"></span><br><span class="line"># table_cache = 32768</span><br><span class="line"></span><br><span class="line">thread_stack = 512k</span><br><span class="line">max_length_for_sort_data = 16k</span><br><span class="line"></span><br><span class="line"># INNODB</span><br><span class="line"></span><br><span class="line">innodb_flush_method = O_DIRECT</span><br><span class="line">innodb_log_buffer_size = 16M</span><br><span class="line">innodb_flush_log_at_trx_commit = 2</span><br><span class="line">innodb_file_per_table = 1</span><br><span class="line">innodb_buffer_pool_size = 2G</span><br><span class="line">innodb_buffer_pool_instances = 8</span><br><span class="line">innodb_stats_on_metadata = off</span><br><span class="line">innodb_open_files = 8192</span><br><span class="line">innodb_read_io_threads = 8</span><br><span class="line">innodb_write_io_threads = 16</span><br><span class="line">innodb_io_capacity = 20000</span><br><span class="line">innodb_thread_concurrency = 0</span><br><span class="line">innodb_lock_wait_timeout = 60</span><br><span class="line">innodb_old_blocks_time=1000</span><br><span class="line">innodb_use_native_aio = 1</span><br><span class="line">innodb_purge_threads=1</span><br><span class="line">innodb_change_buffering=all</span><br><span class="line">innodb_log_file_size = 128M</span><br><span class="line">innodb_log_files_in_group = 3</span><br><span class="line">innodb_data_file_path = ibdata1:1024M:autoextend</span><br><span class="line"></span><br><span class="line"># LOGGING</span><br><span class="line"></span><br><span class="line">log_error = /home/JumpServer/mysql/logs/mysql-error.log</span><br><span class="line"></span><br><span class="line"># log_queries_not_using_indexes = 1</span><br><span class="line"></span><br><span class="line"># slow_query_log = 1</span><br><span class="line"></span><br><span class="line">slow_query_log_file =</span><br><span class="line">/home/JumpServer/mysql/logs/slowlog_36215.log</span><br><span class="line"></span><br><span class="line"># TimeOut</span><br><span class="line"></span><br><span class="line">interactive_timeout = 30</span><br><span class="line">wait_timeout = 30</span><br><span class="line">[mysqldump]</span><br><span class="line">quick</span><br><span class="line">max_allowed_packet = 16M</span><br><span class="line">[mysql]</span><br><span class="line">no-auto-rehash</span><br><span class="line">[myisamchk]</span><br><span class="line">key_buffer_size = 256M</span><br><span class="line">sort_buffer_size = 256M</span><br><span class="line">read_buffer = 2M</span><br><span class="line">write_buffer = 2M</span><br><span class="line">[mysqlhotcopy]</span><br><span class="line">interactive-timeout</span><br></pre></td></tr></table></figure>

<h5 id="⑥创建文件夹"><a href="#⑥创建文件夹" class="headerlink" title="⑥创建文件夹"></a>⑥创建文件夹</h5><p>要和上面配置文件当中的对应的文件夹的路径一样，一定要提前创建</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[JumpServer@op-remote mysql-5.7.23]$ mkdir</span><br><span class="line">/home/JumpServer/mysql/mysql-5.7.23/&#123;data,temp,etc&#125;</span><br><span class="line">[JumpServer@op-remote mysql-5.7.23]$ mkdir</span><br><span class="line">/home/JumpServer/mysql/logs</span><br></pre></td></tr></table></figure>

<h5 id="⑦初始化数据库"><a href="#⑦初始化数据库" class="headerlink" title="⑦初始化数据库"></a>⑦初始化数据库</h5><p>初始化数据库， –initialize 表示默认生成一个安全的密码，–initializeinsecure<br>表示不生成密码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[JumpServer@op-remote mysql-5.7.23]$ mysqld --defaultsfile=/</span><br><span class="line">home/JumpServer/mysql/mysql-5.7.23/etc/my.cnf --</span><br><span class="line">initialize-insecure --user=&apos;JumpServer&apos; --</span><br><span class="line">log_error_verbosity --explicit_defaults_for_timestamp --</span><br><span class="line">basedir=/home/JumpServer/mysql/mysql-5.7.23 --</span><br><span class="line">datadir=/home/JumpServer/mysql/mysql-5.7.23/data</span><br></pre></td></tr></table></figure>

<h5 id="⑧初始化data数据库文件"><a href="#⑧初始化data数据库文件" class="headerlink" title="⑧初始化data数据库文件"></a>⑧初始化data数据库文件</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[JumpServer@op-remote mysql-5.7.23]$ mysql_install_db --</span><br><span class="line">user=JumpServer ./mysql_install_db --user=mysql --</span><br><span class="line">basedir=/home/JumpServer/mysql/mysql-5.7.23 --</span><br><span class="line">datadir=/home/JumpServer/mysql/mysql-5.7.23/data</span><br></pre></td></tr></table></figure>

<h5 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h5><p>出现错误以后，注意看错误日志，尤其是手动初始化数据库的data文件夹的操<br>作</p>
<h5 id="⑨启动MySQL"><a href="#⑨启动MySQL" class="headerlink" title="⑨启动MySQL"></a>⑨启动MySQL</h5><p>指定配置文件启动，和以前的启动的方法有很大的不同</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysqld_safe --defaultsfile=/</span><br><span class="line">home/JumpServer/mysql/mysql-5.7.23/etc/my.cnf &amp;</span><br></pre></td></tr></table></figure>

<h5 id="⑩修改密码"><a href="#⑩修改密码" class="headerlink" title="⑩修改密码"></a>⑩修改密码</h5><p>在配置文件当中让skip-grant-tables=1，然后重启MySQL</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">msyql&gt; update mysql.user set authentication_string =</span><br><span class="line">password(&apos;666666&apos;), password_expired = &apos;N&apos;,</span><br><span class="line">password_last_changed = now() where user = &apos;root&apos;;</span><br></pre></td></tr></table></figure>

<h5 id="6-创建函数并授权"><a href="#6-创建函数并授权" class="headerlink" title="6.创建函数并授权"></a>6.创建函数并授权</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">msyql&gt; create database jumpserver default charset</span><br><span class="line">&apos;utf8&apos;;</span><br><span class="line">mysql&gt; grant all on jumpserver.* to</span><br><span class="line">&apos;jumpserver&apos;@&apos;localhost&apos; identified by &apos;666666&apos;;</span><br><span class="line">mysql&gt; grant all on jumpserver.* to</span><br><span class="line">&apos;jumpserver&apos;@&apos;127.0.0.1&apos; identified by &apos;666666&apos;;</span><br><span class="line">mysql&gt; flush privileges;</span><br><span class="line">[JumpServer@op-remote logs]$ mysql -ujumpserver -</span><br><span class="line">p&apos;666666&apos;</span><br></pre></td></tr></table></figure>

<h5 id="注意-1"><a href="#注意-1" class="headerlink" title="注意"></a>注意</h5><p>这里进行授权的时候会有jumpserver’@’localhost’，<br>jumpserver’@’127.0.0.1’的区别，由于可能会出现权限的问题，那么最后就<br>是两个host的用户都创建一次</p>
<h5 id="7-修改-Jumpserver-配置文件"><a href="#7-修改-Jumpserver-配置文件" class="headerlink" title="7.修改 Jumpserver 配置文件"></a>7.修改 Jumpserver 配置文件</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[JumpServer@op-remote JumpServerPackage]$ cp</span><br><span class="line">config_example.py config.py</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line">[JumpServer@op-remote JumpServerPackage]$ vim config.py</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">jumpserver.config</span><br><span class="line"></span><br><span class="line">Jumpserver project setting file</span><br><span class="line">:copyright: (c) 2014-2017 by Jumpserver Team</span><br><span class="line">:license: GPL v2, see LICENSE for more details.</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">import os</span><br><span class="line">BASE_DIR = os.path.dirname(os.path.abspath(__file__))</span><br><span class="line">class Config:</span><br><span class="line"></span><br><span class="line"># Use it to encrypt or decrypt data</span><br><span class="line"></span><br><span class="line"># SECURITY WARNING: keep the secret key used in</span><br><span class="line"></span><br><span class="line">production secret! 请随意输入随机字符串（推荐字符大于等于 50位</span><br><span class="line">SECRET_KEY = os.environ.get(&apos;SECRET_KEY&apos;) or</span><br><span class="line">&apos;p*O8Il8F1+&amp;#CF1uASm+oi(*dc^sd%Gss\.Sg;/Asu)&amp;H%s.O#CIl1*</span><br><span class="line">33;Pzd&apos;</span><br><span class="line"></span><br><span class="line"># Django security setting, if your disable debug</span><br><span class="line"></span><br><span class="line">model, you should setting that</span><br><span class="line">ALLOWED_HOSTS = [&apos;*&apos;]</span><br><span class="line"></span><br><span class="line"># DEBUG 模式 True为开启 False为关闭，默认开启，生产环境推荐</span><br><span class="line"></span><br><span class="line">关闭</span><br><span class="line"></span><br><span class="line"># 注意：如果设置了DEBUG = False，访问8080端口页面会显示不正</span><br><span class="line"></span><br><span class="line">常，需要搭建 nginx 代理才可以正常访问</span><br><span class="line"></span><br><span class="line"># Development env open this, when error occur</span><br><span class="line"></span><br><span class="line">display the full process track, Production disable it</span><br><span class="line">DEBUG = os.environ.get(&quot;DEBUG&quot;) or False</span><br><span class="line"></span><br><span class="line"># 日志级别，默认为DEBUG，可调整为INFO, WARNING, ERROR,</span><br><span class="line"></span><br><span class="line">CRITICAL，默认INFO</span><br><span class="line"></span><br><span class="line"># DEBUG, INFO, WARNING, ERROR, CRITICAL can set. See</span><br><span class="line"></span><br><span class="line">https://docs.djangoproject.com/en/1.10/topics/logging/</span><br><span class="line">LOG_LEVEL = os.environ.get(&quot;LOG_LEVEL&quot;) or &apos;INFO&apos;</span><br><span class="line">LOG_DIR = os.path.join(BASE_DIR, &apos;logs&apos;)</span><br><span class="line"></span><br><span class="line"># Database setting, Support sqlite3, mysql, postgres</span><br><span class="line"></span><br><span class="line">....</span><br><span class="line"></span><br><span class="line"># See</span><br><span class="line"></span><br><span class="line">https://docs.djangoproject.com/en/1.10/ref/settings/#dat</span><br><span class="line">abases</span><br><span class="line"></span><br><span class="line"># SQLite setting:</span><br><span class="line"></span><br><span class="line"># DB_ENGINE = &apos;sqlite3&apos;</span><br><span class="line"></span><br><span class="line"># DB_NAME = os.path.join(BASE_DIR, &apos;data&apos;,</span><br><span class="line"></span><br><span class="line">&apos;db.sqlite3&apos;)</span><br><span class="line"></span><br><span class="line"># MySQL or postgres setting like:</span><br><span class="line"></span><br><span class="line">DB_ENGINE = os.environ.get(&quot;DB_ENGINE&quot;) or &apos;mysql&apos;</span><br><span class="line">DB_HOST = os.environ.get(&quot;DB_HOST&quot;) or &apos;localhost&apos;</span><br><span class="line">DB_PORT = os.environ.get(&quot;DB_PORT&quot;) or 3306</span><br><span class="line">DB_USER = os.environ.get(&quot;DB_USER&quot;) or &apos;jumpserver&apos;</span><br><span class="line">DB_PASSWORD = os.environ.get(&quot;DB_PASSWORD&quot;) or</span><br><span class="line">&apos;666666&apos;</span><br><span class="line">DB_NAME = os.environ.get(&quot;DB_NAME&quot;) or &apos;jumpserver&apos;</span><br><span class="line"></span><br><span class="line"># When Django start it will bind this host and port</span><br><span class="line"></span><br><span class="line"># ./manage.py runserver 127.0.0.1:8080</span><br><span class="line"></span><br><span class="line">HTTP_BIND_HOST = &apos;127.0.0.1&apos;</span><br><span class="line">HTTP_LISTEN_PORT = 8080</span><br><span class="line"></span><br><span class="line"># Use Redis as broker for celery and web socket</span><br><span class="line"></span><br><span class="line">REDIS_HOST = os.environ.get(&quot;REDIS_HOST&quot;) or</span><br><span class="line">&apos;127.0.0.1&apos;</span><br><span class="line">REDIS_PORT = os.environ.get(&quot;REDIS_PORT&quot;) or 6379</span><br><span class="line"></span><br><span class="line">REDIS_PASSWORD = os.environ.get(&quot;REDIS_PASSWORD&quot;) or</span><br><span class="line">&apos;&apos;</span><br><span class="line">REDIS_DB_CELERY = os.environ.get(&apos;REDIS_DB&apos;) or 3</span><br><span class="line">REDIS_DB_CACHE = os.environ.get(&apos;REDIS_DB&apos;) or 4</span><br><span class="line">def __init__(self):</span><br><span class="line">pass</span><br><span class="line">def __getattr__(self, item):</span><br><span class="line">return None</span><br><span class="line">class DevelopmentConfig(Config):</span><br><span class="line">pass</span><br><span class="line">class TestConfig(Config):</span><br><span class="line">pass</span><br><span class="line">class ProductionConfig(Config):</span><br><span class="line">pass</span><br><span class="line"></span><br><span class="line"># Default using Config settings, you can write if/else</span><br><span class="line"></span><br><span class="line">for different env</span><br><span class="line">config = DevelopmentConfig()</span><br></pre></td></tr></table></figure>

<h5 id="8-生成数据库表结构和初始化数据"><a href="#8-生成数据库表结构和初始化数据" class="headerlink" title="8.生成数据库表结构和初始化数据"></a>8.生成数据库表结构和初始化数据</h5><p>这里很容易报错，所以我们需要注意前面安装的python的环境，尽量是3.6版<br>本的</p>
<h5 id="9-启动JumpServer"><a href="#9-启动JumpServer" class="headerlink" title="9.启动JumpServer"></a>9.启动JumpServer</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[JumpServer@op-remote JumpServerPackage]$ ./jms start</span><br><span class="line">all -d</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ cd /opt/jumpserver</span><br><span class="line">$ ./jms start all # 后台运行使用 -d 参数./jms start all -d</span><br><span class="line"></span><br><span class="line"># 新版本更新了运行脚本，使用方式./jms</span><br><span class="line"></span><br><span class="line">start|stop|status|restart all 后台运行请添加 -d 参数</span><br></pre></td></tr></table></figure>

<h4 id="四、安装SSH-Server-和-WebSocket-Server-Coco"><a href="#四、安装SSH-Server-和-WebSocket-Server-Coco" class="headerlink" title="四、安装SSH Server 和 WebSocket Server: Coco"></a>四、安装SSH Server 和 WebSocket Server: Coco</h4><h5 id="1-下载或-Clone-项目-1"><a href="#1-下载或-Clone-项目-1" class="headerlink" title="1.下载或 Clone 项目"></a>1.下载或 Clone 项目</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[JumpServer@op-remote ~]$ mkdir Coco</span><br><span class="line">[JumpServer@op-remote ~]$ cd Coco</span><br><span class="line">[JumpServer@op-remote Coco]$ git clone</span><br><span class="line">https://github.com/jumpserver/coco.git &amp;&amp; cd coco &amp;&amp; git</span><br><span class="line">checkout master</span><br></pre></td></tr></table></figure>

<h5 id="2-安装依赖"><a href="#2-安装依赖" class="headerlink" title="2.安装依赖"></a>2.安装依赖</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@op-remote Coco]$ cd coco/requirement</span><br><span class="line">[root@op-remote Coco]$ yum -y install $(cat</span><br><span class="line">rpm_requirements.txt)</span><br><span class="line">[root@op-remote Coco]$ pip3 install -r requirements.txt</span><br></pre></td></tr></table></figure>

<h5 id="3-修改配置文件并运行"><a href="#3-修改配置文件并运行" class="headerlink" title="3.修改配置文件并运行"></a>3.修改配置文件并运行</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">[JumpServer@op-remote coco]# cp conf_example.py conf.py</span><br><span class="line">[JumpServer@op-remote coco]# vim conf.py</span><br><span class="line">#!/usr/bin/env python3</span><br><span class="line"></span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line">import os</span><br><span class="line">BASE_DIR = os.path.dirname(__file__)</span><br><span class="line">class Config:</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">Coco config file, coco also load config from server</span><br><span class="line">update setting below</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line"># 项目名称, 会用来向Jumpserver注册, 识别而已, 不能重复</span><br><span class="line"></span><br><span class="line">NAME = &quot;lepai_coco&quot;</span><br><span class="line"></span><br><span class="line"># Jumpserver项目的url, api请求注册会使用</span><br><span class="line"></span><br><span class="line">CORE_HOST = os.environ.get(&quot;CORE_HOST&quot;) or</span><br><span class="line">&apos;http://127.0.0.1:8080&apos;</span><br><span class="line"></span><br><span class="line"># 启动时绑定的ip, 默认 0.0.0.0</span><br><span class="line"></span><br><span class="line"># BIND_HOST = &apos;0.0.0.0&apos;</span><br><span class="line"></span><br><span class="line"># 监听的SSH端口号, 默认2222</span><br><span class="line"></span><br><span class="line"># SSHD_PORT = 2222</span><br><span class="line"></span><br><span class="line"># 监听的HTTP/WS端口号，默认5000</span><br><span class="line"></span><br><span class="line"># HTTPD_PORT = 5000</span><br><span class="line"></span><br><span class="line"># 项目使用的ACCESS KEY, 默认会注册,并保存到</span><br><span class="line"></span><br><span class="line">ACCESS_KEY_STORE中,</span><br><span class="line"></span><br><span class="line"># 如果有需求, 可以写到配置文件中, 格式</span><br><span class="line"></span><br><span class="line">access_key_id:access_key_secret</span><br><span class="line"></span><br><span class="line"># ACCESS_KEY = None</span><br><span class="line"></span><br><span class="line"># ACCESS KEY 保存的地址, 默认注册后会保存到该文件中</span><br><span class="line"></span><br><span class="line"># ACCESS_KEY_STORE = os.path.join(BASE_DIR, &apos;keys&apos;,</span><br><span class="line"></span><br><span class="line">&apos;.access_key&apos;)</span><br><span class="line"></span><br><span class="line"># 加密密钥</span><br><span class="line"></span><br><span class="line"># SECRET_KEY = None</span><br><span class="line"></span><br><span class="line"># 设置日志级别 [&apos;DEBUG&apos;, &apos;INFO&apos;, &apos;WARN&apos;, &apos;ERROR&apos;,</span><br><span class="line"></span><br><span class="line">&apos;FATAL&apos;, &apos;CRITICAL&apos;]</span><br><span class="line">LOG_LEVEL = &apos;INFO&apos;</span><br><span class="line"></span><br><span class="line"># 日志存放的目录</span><br><span class="line"></span><br><span class="line"># LOG_DIR = os.path.join(BASE_DIR, &apos;logs&apos;)</span><br><span class="line"></span><br><span class="line"># Session录像存放目录</span><br><span class="line"></span><br><span class="line"># SESSION_DIR = os.path.join(BASE_DIR, &apos;sessions&apos;)</span><br><span class="line"></span><br><span class="line"># 资产显示排序方式, [&apos;ip&apos;, &apos;hostname&apos;]</span><br><span class="line"></span><br><span class="line"># ASSET_LIST_SORT_BY = &apos;ip&apos;</span><br><span class="line"></span><br><span class="line"># 登录是否支持密码认证</span><br><span class="line"></span><br><span class="line"># PASSWORD_AUTH = True</span><br><span class="line"></span><br><span class="line"># 登录是否支持秘钥认证</span><br><span class="line"></span><br><span class="line"># PUBLIC_KEY_AUTH = True</span><br><span class="line"></span><br><span class="line"># 和Jumpserver 保持心跳时间间隔</span><br><span class="line"></span><br><span class="line"># HEARTBEAT_INTERVAL = 5</span><br><span class="line"></span><br><span class="line"># Admin的名字，出问题会提示给用户</span><br><span class="line"></span><br><span class="line"># ADMINS = &apos;&apos;</span><br><span class="line"></span><br><span class="line">COMMAND_STORAGE = &#123;</span><br><span class="line">&quot;TYPE&quot;: &quot;server&quot;</span><br><span class="line">&#125;</span><br><span class="line">REPLAY_STORAGE = &#123;</span><br><span class="line">&quot;TYPE&quot;: &quot;server&quot;</span><br><span class="line">&#125;</span><br><span class="line">config = Config()</span><br></pre></td></tr></table></figure>

<h4 id="五、安装-Web-Terminal-前端-Luna"><a href="#五、安装-Web-Terminal-前端-Luna" class="headerlink" title="五、安装 Web Terminal 前端: Luna"></a>五、安装 Web Terminal 前端: Luna</h4><h5 id="1-解压-Luna"><a href="#1-解压-Luna" class="headerlink" title="1.解压 Luna"></a>1.解压 Luna</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[JumpServer@op-remote ~]$ mkdir Luna</span><br><span class="line">[JumpServer@op-remote Luna]$ wget</span><br><span class="line">https://github.com/jumpserver/luna/releases/download/1.4</span><br><span class="line">.0/luna.tar.gz</span><br><span class="line">[JumpServer@op-remote Luna]$ tar xvf luna.tar.gz</span><br></pre></td></tr></table></figure>


        
      </div>
    </div>

  
    </div>
  






          <div class="main-footer">
  
    © 2020 bibi - Powered by <a href="http://hexo.io" target="_blank">Hexo</a> - Theme <a href="https://github.com/denjones/hexo-theme-chan" target="_blank">Chan</a>
  
</div>

      
        </div>
      
    </div>
  </div>
  <script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>

  <link rel="stylesheet" href="/PhotoSwipe/photoswipe.css">
  <link rel="stylesheet" href="/PhotoSwipe/default-skin/default-skin.css">

  <!-- Root element of PhotoSwipe. Must have class pswp. -->
  <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
             It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

      <!-- Container that holds slides.
                PhotoSwipe keeps only 3 of them in the DOM to save memory.
                Don't modify these 3 pswp__item elements, data is added later on. -->
      <div class="pswp__container">
        <div class="pswp__item"></div>
        <div class="pswp__item"></div>
        <div class="pswp__item"></div>
      </div>

      <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
      <div class="pswp__ui pswp__ui--hidden">

        <div class="pswp__top-bar">

          <!--  Controls are self-explanatory. Order can be changed. -->

          <div class="pswp__counter"></div>

          <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

          <button class="pswp__button pswp__button--share" title="Share"></button>

          <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

          <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

          <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
          <!-- element will get class pswp__preloader--active when preloader is running -->
          <div class="pswp__preloader">
            <div class="pswp__preloader__icn">
              <div class="pswp__preloader__cut">
                <div class="pswp__preloader__donut"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
          <div class="pswp__share-tooltip"></div>
        </div>

        <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>

        <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button>

        <div class="pswp__caption">
          <div class="pswp__caption__center"></div>
        </div>
      </div>
    </div>
  </div>

  <script src="/PhotoSwipe/photoswipe.js"></script>
  <script src="/PhotoSwipe/photoswipe-ui-default.js"></script>


<script src="/perfect-scrollbar/js/min/perfect-scrollbar.min.js"></script>
<script src="/scripts/main.js"></script>

</body>
</html>
